#!/usr/bin/env qore
#
# MailerWorkflowModule integration test

%new-style
%require-types
%enable-all-warnings

%exec-class MainTest

%requires QorusInterfaceTest

class MainTest inherits QorusWorkflowTest {
    private {
    }

    constructor() : QorusWorkflowTest("MAILER-WORKFLOW-MODULE", "1.0", \ARGV) {
        addTestCase("test sending email", \testSendingEmail());
        set_return_value(main());
    }

    testSendingEmail() {
        string wf_name = "MAILER-WORKFLOW-MODULE";

        CreateOrder order(wf_name, {});
        exec(order);

        softint wfiid = order.wfiid();
        exec(new WaitForWfiid(wfiid));
    }
}

