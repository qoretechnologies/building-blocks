#!/usr/bin/env qore
# -*- mode: qore; indent-tabs-mode: nil -*-
# author: Qore Technologies

%new-style
%require-types
%strict-args
%enable-all-warnings

%requires QUnit

%requires QMock
%requires QMockQore
%requires QMockQoreSSH2
%requires QorusMock

%include ../../SftpJobModule/BBSftpPoller.qc

%exec-class Main

class Main inherits QUnit::Test {
    private {
        SFTPClient dummy_sftp_mock;
    }


    constructor() : QUnit::Test("BBSftpPollerTest", "1.0") {
        addTestCase("createOrder() test ", \test_createOrder());

        set_return_value(main());
    }

    setUp() {
        QorusMock::refresh();
        QorusMock::setDefaultMocks();
        dummy_sftp_mock = new SFTPClient("localhost");
    }

    test_createOrder() {
        printf("%N\n", type(dummy_sftp_mock));
        #BBSftpPoller poller = new BBSftpPoller(dummy_sftp_mock, {});
#
        #poller.singleFileEvent({});
    }
}
