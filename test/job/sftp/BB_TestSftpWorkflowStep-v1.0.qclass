# name: BB_TestSftpWorkflowStep
# version: 1.0
# desc: Qore test step class
# author: Qore Technologies, s.r.o.
%new-style
%require-types
%strict-args
%enable-all-warnings

class BB_TestSftpWorkflowStep inherits QorusNormalStep {
    primary() {
        # get path
        string path = getStaticData("local_path");
        # read in file data to dynamic data
        string data = File::readTextFile(path);
        # log path
        logInfo("got path: %y (%d bytes)", path, data.size());
        # update dynamic data
        updateDynamicData({"data": data});
        # unlink file
        unlink(path);
    }
}
# END
